# Video Duration Stats (视频时长统计工具)

这是一个用于递归统计文件夹下所有 MP4 视频文件总时长的 Python 脚本。它能够生成层级分明的目录树结构，并输出为 Markdown ���告，非常适合整理视频课程、教程或素材库。

## ✨ 功能特点

*   **递归统计**：自动遍历所有子目录，计算每个文件夹（及其子文件夹）内的视频总时长。
*   **多线程加速**：使用 `concurrent.futures` 并发读取视频元数据，大幅提升大量文件时的处理速度。
*   **智能合并**：如果父文件夹仅包含一个有内容的子文件夹，会自动合并显示，保持目录树整洁。
*   **Markdown 导出**：生成可视化的目录树报告（`.md` 文件），方便查看和分享。
*   **人性化显示**：
    *   自动格式化时间（如：`1小时 30分`）。
    *   智能省略零值（如：`0分` 或 `0秒` 会被自动隐藏，仅显示有效单位）。

## 🛠️ 依赖环境

本项目依赖 Python 3.x 以及 `moviepy` 库。

### 安装依赖

在使用前，请确保已安装 `moviepy`：

```bash
pip install moviepy
```

*注意：`moviepy` 可能依赖 `ffmpeg`，通常安装库时会自动配置。如果遇到报错，请确保系统已安装 ffmpeg。*

## 🚀 使用方法

### 1. 运行脚本

你可以通过命令行参数直接指定路径，或者直接运行脚本后输入路径。

**方式 A：命令行参数**

```bash
python main.py /path/to/your/video_folder
```

**方式 B：交互式输入**

```bash
python main.py
# 然后按提示输入文件夹路径
```

### 2. 查看结果

脚本运行结束后：
1.  终端会打印出完整的目录树结构和时长。
2.  会在当前目录下生成一个名为 `[文件夹名]时长统计.md` 的文件。

## 📝 输出示例

**终端/Markdown 输出效果：**

```text
# 课程总目录  10小时 5分
## 第一章：基础入门  2小时 15分
### 1.1 环境搭建  45分
### 1.2 Hello World  1小时 30分
## 第二章：进阶实战  7小时 50分
### 2.1 数据库操作  3小时 20分
### 2.2 网络编程  4小时 30分
```

## ⚠️ 注意事项

*   目前脚本仅统计后缀为 `.mp4` (不区分大小写) 的文件。
*   如果文件损坏无法读取，脚本会报错并跳过该文件（时长记为 0），不会中断整个程序。

## 📄 License

MIT License
```
